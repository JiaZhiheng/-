{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"login\"],{\"0418\":function(e,t,n){\"use strict\";var a=n(\"7a23\"),r=Object(a[\"N\"])(\"data-v-1d614253\");Object(a[\"A\"])(\"data-v-1d614253\");var o=Object(a[\"i\"])(\"div\",{class:\"block\"},null,-1),i=Object(a[\"i\"])(\"i\",{class:\"iconfont more\"},null,-1);Object(a[\"y\"])();var c=r((function(e,t,n,c,l,u){var s=Object(a[\"E\"])(\"van-nav-bar\");return Object(a[\"x\"])(),Object(a[\"f\"])(a[\"a\"],null,[o,Object(a[\"i\"])(s,{class:\"header\",onClickLeft:c.back,title:n.title,\"left-text\":\"返回\",\"left-arrow\":\"\"},{right:r((function(){return[i]})),_:1},8,[\"onClickLeft\",\"title\"])],64)})),l=n(\"6c02\"),u={name:\"Header\",props:{title:{type:String,default:\"\"}},setup:function(){var e=Object(l[\"d\"])(),t=function(){e.back()};return{back:t}}},s=(n(\"bd9c\"),n(\"d959\")),d=n.n(s);const b=d()(u,[[\"render\",c],[\"__scopeId\",\"data-v-1d614253\"]]);t[\"a\"]=b},\"373a\":function(e,t,n){},\"3dc7\":function(e,t,n){\"use strict\";n(\"fd3e\")},\"5bd0\":function(e,t,n){e.exports=n.p+\"img/flower.cdbd1ee3.png\"},\"81d5\":function(e,t,n){\"use strict\";var a=n(\"7b0b\"),r=n(\"23cb\"),o=n(\"50c4\");e.exports=function(e){var t=a(this),n=o(t.length),i=arguments.length,c=r(i>1?arguments[1]:void 0,n),l=i>2?arguments[2]:void 0,u=void 0===l?n:r(l,n);while(u>c)t[c++]=e;return t}},9903:function(e,t,n){\"use strict\";n(\"c452\")},a55b:function(e,t,n){\"use strict\";n.r(t);var a=n(\"7a23\"),r=n(\"5bd0\"),o=n.n(r),i=Object(a[\"N\"])(\"data-v-793d65e9\");Object(a[\"A\"])(\"data-v-793d65e9\");var c={class:\"auth\"},l=Object(a[\"i\"])(\"img\",{class:\"logo\",src:o.a,alt:\"\"},null,-1),u={class:\"form\"},s={style:{margin:\"16px 0\"}},d=Object(a[\"h\"])(\" 登录 \"),b={class:\"form\"},f={style:{margin:\"16px 0\"}},p=Object(a[\"h\"])(\" 注册 \");Object(a[\"y\"])();var m=i((function(e,t,n,r,o,m){var g=Object(a[\"E\"])(\"Header\"),v=Object(a[\"E\"])(\"van-field\"),h=Object(a[\"E\"])(\"van-button\"),O=Object(a[\"E\"])(\"van-form\"),j=Object(a[\"E\"])(\"VueImgVerify\");return Object(a[\"x\"])(),Object(a[\"f\"])(a[\"a\"],null,[Object(a[\"i\"])(g,{title:\"login\"==e.type?\"登录\":\"注册\"},null,8,[\"title\"]),Object(a[\"i\"])(\"div\",c,[l,\"login\"==e.type?(Object(a[\"x\"])(),Object(a[\"f\"])(O,{key:0,class:\"form-wrap\",onSubmit:r.onSubmit},{default:i((function(){return[Object(a[\"i\"])(\"div\",u,[Object(a[\"i\"])(v,{clearable:\"\",modelValue:e.username,\"onUpdate:modelValue\":t[1]||(t[1]=function(t){return e.username=t}),name:\"username\",label:\"账号\",placeholder:\"请输入账号\",rules:[{required:!0,message:\"账号不能为空！\"}]},null,8,[\"modelValue\"]),Object(a[\"i\"])(v,{clearable:\"\",modelValue:e.password,\"onUpdate:modelValue\":t[2]||(t[2]=function(t){return e.password=t}),type:\"password\",name:\"password\",label:\"密码\",placeholder:\"请输入密码\",rules:[{required:!0,message:\"密码不能为空！\"}]},null,8,[\"modelValue\"])]),Object(a[\"i\"])(\"div\",s,[Object(a[\"i\"])(h,{round:\"\",block:\"\",type:\"primary\",\"native-type\":\"submit\"},{default:i((function(){return[d]})),_:1}),Object(a[\"i\"])(\"p\",{onClick:t[3]||(t[3]=function(e){return r.chanegType(\"register\")}),class:\"change-btn\"},\"没有账号，前往注册\")])]})),_:1},8,[\"onSubmit\"])):Object(a[\"g\"])(\"\",!0),\"register\"==e.type?(Object(a[\"x\"])(),Object(a[\"f\"])(O,{key:1,class:\"form-wrap\",onSubmit:r.onSubmit},{default:i((function(){return[Object(a[\"i\"])(\"div\",b,[Object(a[\"i\"])(v,{clearable:\"\",modelValue:e.username,\"onUpdate:modelValue\":t[4]||(t[4]=function(t){return e.username=t}),name:\"username\",label:\"账号\",placeholder:\"请输入账号\",rules:[{required:!0,message:\"账号不能为空！\"}]},null,8,[\"modelValue\"]),Object(a[\"i\"])(v,{clearable:\"\",modelValue:e.password,\"onUpdate:modelValue\":t[5]||(t[5]=function(t){return e.password=t}),type:\"password\",name:\"password\",label:\"密码\",placeholder:\"请输入密码\",rules:[{required:!0,message:\"密码不能为空！\"}]},null,8,[\"modelValue\"]),Object(a[\"i\"])(v,{center:\"\",clearable:\"\",label:\"验证码\",placeholder:\"输入验证码\",modelValue:e.verify,\"onUpdate:modelValue\":t[6]||(t[6]=function(t){return e.verify=t})},{button:i((function(){return[Object(a[\"i\"])(j,{ref:\"verifyRef\"},null,512)]})),_:1},8,[\"modelValue\"])]),Object(a[\"i\"])(\"div\",f,[Object(a[\"i\"])(h,{round:\"\",block:\"\",loading:e.loading,type:\"primary\",\"native-type\":\"submit\"},{default:i((function(){return[p]})),_:1},8,[\"loading\"]),Object(a[\"i\"])(\"p\",{onClick:t[7]||(t[7]=function(e){return r.chanegType(\"login\")}),class:\"change-btn\"},\"登录已有账号\")])]})),_:1},8,[\"onSubmit\"])):Object(a[\"g\"])(\"\",!0)])],64)})),g=n(\"5530\"),v=(n(\"433b\"),n(\"d399\")),h=(n(\"96cf\"),n(\"1da1\")),O={class:\"img-verify\"};function j(e,t,n,r,o,i){return Object(a[\"x\"])(),Object(a[\"f\"])(\"div\",O,[Object(a[\"i\"])(\"canvas\",{ref:\"verify\",width:e.width,height:e.height,onClick:t[1]||(t[1]=function(){return r.handleDraw&&r.handleDraw.apply(r,arguments)})},null,8,[\"width\",\"height\"])])}n(\"99af\"),n(\"cb29\");var y={setup:function(){var e=Object(a[\"C\"])(null),t=Object(a[\"B\"])({pool:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\",width:120,height:40,imgCode:\"\"});Object(a[\"u\"])((function(){t.imgCode=i()}));var n=function(){t.imgCode=i()},r=function(e,t){return parseInt(Math.random()*(t-e)+e)},o=function(e,t){var n=r(e,t),a=r(e,t),o=r(e,t);return\"rgb(\".concat(n,\",\").concat(a,\",\").concat(o,\")\")},i=function(){var n=e.value.getContext(\"2d\");n.fillStyle=o(180,230),n.fillRect(0,0,t.width,t.height);for(var a=\"\",i=0;i<4;i++){var c=t.pool[r(0,t.pool.length)];a+=c;var l=r(18,40),u=r(-30,30);n.font=l+\"px Simhei\",n.textBaseline=\"top\",n.fillStyle=o(80,150),n.save(),n.translate(30*i+15,15),n.rotate(u*Math.PI/180),n.fillText(c,-10,-15),n.restore()}for(var s=0;s<5;s++)n.beginPath(),n.moveTo(r(0,t.width),r(0,t.height)),n.lineTo(r(0,t.width),r(0,t.height)),n.strokeStyle=o(180,230),n.closePath(),n.stroke();for(var d=0;d<40;d++)n.beginPath(),n.arc(r(0,t.width),r(0,t.height),1,0,2*Math.PI),n.closePath(),n.fillStyle=o(150,200),n.fill();return a};return Object(g[\"a\"])(Object(g[\"a\"])({},Object(a[\"H\"])(t)),{},{verify:e,handleDraw:n})}},w=(n(\"9903\"),n(\"d959\")),k=n.n(w);const x=k()(y,[[\"render\",j]]);var C=x,V=n(\"0418\"),S=n(\"a27e\"),_=(n(\"a18c\"),{name:\"Login\",components:{VueImgVerify:C,Header:V[\"a\"]},setup:function(){var e=Object(a[\"C\"])(null),t=Object(a[\"B\"])({username:\"贾志恒\",password:\"123456\",type:\"login\",verify:\"\",imgCode:\"\",loading:!1}),n=function(){var n=Object(h[\"a\"])(regeneratorRuntime.mark((function n(a){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,\"login\"!=t.type){n.next=10;break}return n.next=4,S[\"a\"].post(\"/user/login\",{username:t.username,password:t.password});case 4:r=n.sent,o=r.data,localStorage.setItem(\"token\",o.token),window.location.href=\"/\",n.next=23;break;case 10:if(t.imgCode=e.value.imgCode||\"\",e.value.imgCode.toLowerCase()==t.verify.toLowerCase()){n.next=15;break}return console.log(\"verifyRef.value.imgCode\",e.value.imgCode),v[\"a\"].fail(\"验证码错误\"),n.abrupt(\"return\");case 15:return t.loading=!0,n.next=18,S[\"a\"].post(\"/user/register\",{username:t.username,password:t.password});case 18:i=n.sent,i.data,v[\"a\"].success(\"注册成功\"),t.type=\"login\",t.loading=!1;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n[\"catch\"](0),console.log(111),t.loading=!1;case 29:case\"end\":return n.stop()}}),n,null,[[0,25]])})));return function(e){return n.apply(this,arguments)}}(),r=function(e){t.type=e};return Object(g[\"a\"])(Object(g[\"a\"])({},Object(a[\"H\"])(t)),{},{onSubmit:n,chanegType:r,verifyRef:e})}});n(\"3dc7\");const I=k()(_,[[\"render\",m],[\"__scopeId\",\"data-v-793d65e9\"]]);t[\"default\"]=I},bd9c:function(e,t,n){\"use strict\";n(\"373a\")},c452:function(e,t,n){},cb29:function(e,t,n){var a=n(\"23e7\"),r=n(\"81d5\"),o=n(\"44d2\");a({target:\"Array\",proto:!0},{fill:r}),o(\"fill\")},fd3e:function(e,t,n){}}]);","extractedComments":[]}