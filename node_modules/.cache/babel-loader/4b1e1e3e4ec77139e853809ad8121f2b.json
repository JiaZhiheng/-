{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\src\\views\\Account.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\src\\views\\Account.vue","mtime":1645024041710},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvbGVub3ZvL0Rlc2t0b3AvY29zdC9cdTVDMEZcdTgzQ0FcdThCQjBcdThEMjYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInZhbnQvZXMvdG9hc3Qvc3R5bGUvbGVzcyI7CmltcG9ydCBfVG9hc3QgZnJvbSAidmFudC9lcy90b2FzdCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2xlbm92by9EZXNrdG9wL2Nvc3QvXHU1QzBGXHU4M0NBXHU4QkIwXHU4RDI2L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgSGVhZGVyIGZyb20gJy4uL2NvbXBvbmVudHMvSGVhZGVyLnZ1ZSc7CmltcG9ydCBheGlvcyBmcm9tICcuLi91dGlscy9heGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWNjb3VudCcsCiAgY29tcG9uZW50czogewogICAgSGVhZGVyOiBIZWFkZXIKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIHZhciBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIG9sZFBhc3M6ICcnLAogICAgICBuZXdQYXNzOiAnJywKICAgICAgbmV3UGFzczI6ICcnCiAgICB9KTsgLy8g5L+u5pS55a+G56CBCgogICAgdmFyIGhhbmRsZU9rID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF9heGlvcyRwb3N0LCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZS5uZXdQYXNzICE9IHN0YXRlLm5ld1Bhc3MyKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX1RvYXN0LmZhaWwoJ+aWsOWvhueggeS4jeS4gOiHtCcpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiDkv67mlLnlr4bnoIHmjqXlj6MgL3VzZXIvbW9kaWZ5X3Bhc3Mg5o6l5pS25LiJ5Liq5Y+C5pWw77yaDQogICAgICAgICAgICAgICAgICogb2xkX3Bhc3PvvJrogIHlr4bnoIHjgIINCiAgICAgICAgICAgICAgICAgKiBuZXdfcGFzc++8muaWsOWvhueggeOAgg0KICAgICAgICAgICAgICAgICAqIG5ld19wYXNzMu+8muaWsOWvhueggeWGjeasoeehruiupOOAgg0KICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgX2F4aW9zJHBvc3QgPSBheGlvcy5wb3N0KCcvdXNlci9tb2RpZnlfcGFzcycsIHsKICAgICAgICAgICAgICAgICAgb2xkX3Bhc3M6IHN0YXRlLm9sZFBhc3MsCiAgICAgICAgICAgICAgICAgIG5ld19wYXNzOiBzdGF0ZS5uZXdQYXNzLAogICAgICAgICAgICAgICAgICBuZXdfcGFzczI6IHN0YXRlLm5ld1Bhc3MyCiAgICAgICAgICAgICAgICB9KSwgZGF0YSA9IF9heGlvcyRwb3N0LmRhdGE7CgogICAgICAgICAgICAgICAgX1RvYXN0LnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZU9rKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7IC8vIOmAgOWHuueZu+W9lQoKCiAgICB2YXIgbG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgIH0pOwogICAgfTsKICAgIC8qKg0KICAgICAqIOmAgOWHuueZu+W9leaTjeS9nO+8jA0KICAgICAqIOebtOaOpemAmui/hyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKSDmiorlrZjlnKjmnKzlnLDnmoQgdG9rZW4g5riF56m65L6/5Y+v77yMDQogICAgICog5LiL5LiA5qyh6K+35rGC5bCx5LiN5Lya5bim5LiKIHRva2VuIOS6huOAgg0KICAgICAqIOi/memHjOimgeazqOaEj++8jOWmguaenOaYr+iuvue9riBjb29raWUg55qE6K+d77yMDQogICAgICog6ZyA6KaB5pyN5Yqh56uv5o+Q5L6b5o6l5Y+j5riF55CG5b2T5YmN5Z+f5LiL55qEIGNvb2tpZSDkv6Hmga/vvIwNCiAgICAgKiDov5nph4zph4fnlKjnmoTmmK8gdG9rZW4g6Ym05p2D55qE5pa55byP77yMDQogICAgICog5Li65LqG5pa55L6/5ZCO57ut5byA5Y+R5bCP56iL5bqP5ZKMIEFwcO+8jOW9kue7k+S6juS7luS7rOayoeaciea1j+iniOWZqOeOr+Wig+eahCBjb29raWUg6IO95YqbDQogICAgICovCgoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvUmVmcyhzdGF0ZSkpLCB7fSwgewogICAgICBoYW5kbGVPazogaGFuZGxlT2ssCiAgICAgIGxvZ291dDogbG9nb3V0CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\src\\views\\Account.vue"],"names":[],"mappings":";;;;;AA+BA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,OAAO,MAAP,MAAmB,0BAAnB;AACA,OAAO,KAAP,MAAkB,gBAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,MAAK,EAAL;AADU,GAFC;AAKb,EAAA,KALa,mBAKL;AACN,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,OAAO,EAAE,KADY;AAErB,MAAA,OAAO,EAAE,EAFY;AAGrB,MAAA,OAAO,EAAE,EAHY;AAIrB,MAAA,QAAQ,EAAE;AAJW,KAAD,CAAtB,CAFM,CASN;;AACA,QAAM,QAAO;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBACX,KAAK,CAAC,OAAN,IAAiB,KAAK,CAAC,QADZ;AAAA;AAAA;AAAA;;AAEb,uBAAM,IAAN,CAAW,QAAX;;AAFa;;AAAA;AAKf;AACC;AACA;AACA;AACA;AACA;AAVc,8BAWE,KAAK,CAAC,IAAN,CAAW,mBAAX,EAAgC;AAC/C,kBAAA,QAAQ,EAAE,KAAK,CAAC,OAD+B;AAE/C,kBAAA,QAAQ,EAAE,KAAK,CAAC,OAF+B;AAG/C,kBAAA,SAAS,EAAE,KAAK,CAAC;AAH8B,iBAAhC,CAXF,EAWP,IAXO,eAWP,IAXO;;AAiBf,uBAAM,OAAN,CAAc,MAAd;;AAjBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb,CAVM,CA8BN;;;AACA,QAAM,MAAK,GAAI,SAAT,MAAS,GAAM;AACnB,MAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;AACA,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAI,EAAE;AAAR,OAAZ;AACF,KAHA;AAIA;AACC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACD,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,QAAQ,EAAR,QAFF;AAGE,MAAA,MAAK,EAAL;AAHF;AAKF;AAtDa,CAAf","sourcesContent":["<template>\r\n  <div class=\"account\">\r\n    <Header title=\"账户安全\" />\r\n    <van-cell title=\"密码修改\" @click=\"visible = true\" is-link />\r\n    <van-button class=\"logout\" type=\"primary\" size=\"large\" @click=\"logout\">退出登录</van-button>\r\n    <van-dialog class=\"modal-pass\" v-model:show=\"visible\" @confirm=\"handleOk\" title=\"修改密码\" show-cancel-button>\r\n      <van-cell-group>\r\n        <van-field\r\n          v-model=\"oldPass\"\r\n          label=\"原密码\"\r\n          clearable\r\n          placeholder=\"请输入原密码\"\r\n        />\r\n        <van-field\r\n          v-model=\"newPass\"\r\n          label=\"新密码\"\r\n          clearable\r\n          placeholder=\"请输入新密码\"\r\n        />\r\n        <van-field\r\n          v-model=\"newPass2\"\r\n          label=\"确认密码\"\r\n          clearable\r\n          placeholder=\"再次输入确认\"\r\n        />\r\n      </van-cell-group>\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { Toast } from 'vant'\r\nimport Header from '../components/Header.vue'\r\nimport axios from '../utils/axios'\r\n\r\nexport default {\r\n  name: 'Account',\r\n  components: {\r\n    Header\r\n  },\r\n  setup() {\r\n    const router = useRouter()\r\n    const state = reactive({\r\n      visible: false,\r\n      oldPass: '',\r\n      newPass: '',\r\n      newPass2: ''\r\n    })\r\n\r\n    // 修改密码\r\n    const handleOk = async () => {\r\n      if (state.newPass != state.newPass2) {\r\n        Toast.fail('新密码不一致')\r\n        return\r\n      }\r\n      /**\r\n       * 修改密码接口 /user/modify_pass 接收三个参数：\r\n       * old_pass：老密码。\r\n       * new_pass：新密码。\r\n       * new_pass2：新密码再次确认。\r\n       */\r\n      const { data } = axios.post('/user/modify_pass', {\r\n        old_pass: state.oldPass,\r\n        new_pass: state.newPass,\r\n        new_pass2: state.newPass2\r\n      })\r\n\r\n      Toast.success('修改成功')\r\n    }\r\n\r\n    // 退出登录\r\n    const logout = () => {\r\n      localStorage.removeItem('token')\r\n      router.push({ path: '/login' })\r\n    }\r\n    /**\r\n     * 退出登录操作，\r\n     * 直接通过 localStorage.removeItem('token') 把存在本地的 token 清空便可，\r\n     * 下一次请求就不会带上 token 了。\r\n     * 这里要注意，如果是设置 cookie 的话，\r\n     * 需要服务端提供接口清理当前域下的 cookie 信息，\r\n     * 这里采用的是 token 鉴权的方式，\r\n     * 为了方便后续开发小程序和 App，归结于他们没有浏览器环境的 cookie 能力\r\n     */\r\n    return {\r\n      ...toRefs(state),\r\n      handleOk,\r\n      logout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  @import url('../config/custom.less');\r\n  .account {\r\n    min-height: 100%;\r\n    background-color: #f5f5f5;\r\n    \r\n    .logout {\r\n      display: block;\r\n      margin: 0 auto;\r\n      width: 90%;\r\n      margin-top: 20px;\r\n      background-color: @primary;\r\n      border-color: @primary;\r\n    }\r\n    .modal-pass {\r\n      .van-dialog__header {\r\n        padding: 10px 0;\r\n      }\r\n      .van-dialog__content {\r\n        .van-cell-group {\r\n          padding: 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"],"sourceRoot":""}]}