{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\src\\views\\Account.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\src\\views\\Account.vue","mtime":1644923745253},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvbGVub3ZvL0Rlc2t0b3AvY29zdC9kYWlseS1jb3N0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJ2YW50L2VzL3RvYXN0L3N0eWxlL2xlc3MiOwppbXBvcnQgX1RvYXN0IGZyb20gInZhbnQvZXMvdG9hc3QiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9sZW5vdm8vRGVza3RvcC9jb3N0L2RhaWx5LWNvc3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9IZWFkZXIudnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJy4uL3V0aWxzL2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBY2NvdW50JywKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXI6IEhlYWRlcgogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgdmFyIHN0YXRlID0gcmVhY3RpdmUoewogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgb2xkUGFzczogJycsCiAgICAgIG5ld1Bhc3M6ICcnLAogICAgICBuZXdQYXNzMjogJycKICAgIH0pOyAvLyDkv67mlLnlr4bnoIEKCiAgICB2YXIgaGFuZGxlT2sgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX2F4aW9zJHBvc3QsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKHN0YXRlLm5ld1Bhc3MgIT0gc3RhdGUubmV3UGFzczIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfVG9hc3QuZmFpbCgn5paw5a+G56CB5LiN5LiA6Ie0Jyk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAqIOS/ruaUueWvhueggeaOpeWPoyAvdXNlci9tb2RpZnlfcGFzcyDmjqXmlLbkuInkuKrlj4LmlbDvvJoNCiAgICAgICAgICAgICAgICAgKiBvbGRfcGFzc++8muiAgeWvhueggeOAgg0KICAgICAgICAgICAgICAgICAqIG5ld19wYXNz77ya5paw5a+G56CB44CCDQogICAgICAgICAgICAgICAgICogbmV3X3Bhc3My77ya5paw5a+G56CB5YaN5qyh56Gu6K6k44CCDQogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBfYXhpb3MkcG9zdCA9IGF4aW9zLnBvc3QoJy91c2VyL21vZGlmeV9wYXNzJywgewogICAgICAgICAgICAgICAgICBvbGRfcGFzczogc3RhdGUub2xkUGFzcywKICAgICAgICAgICAgICAgICAgbmV3X3Bhc3M6IHN0YXRlLm5ld1Bhc3MsCiAgICAgICAgICAgICAgICAgIG5ld19wYXNzMjogc3RhdGUubmV3UGFzczIKICAgICAgICAgICAgICAgIH0pLCBkYXRhID0gX2F4aW9zJHBvc3QuZGF0YTsKCiAgICAgICAgICAgICAgICBfVG9hc3Quc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlT2soKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsgLy8g6YCA5Ye655m75b2VCgoKICAgIHZhciBsb2dvdXQgPSBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgfSk7CiAgICB9OwogICAgLyoqDQogICAgICog6YCA5Ye655m75b2V5pON5L2c77yMDQogICAgICog55u05o6l6YCa6L+HIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpIOaKiuWtmOWcqOacrOWcsOeahCB0b2tlbiDmuIXnqbrkvr/lj6/vvIwNCiAgICAgKiDkuIvkuIDmrKHor7fmsYLlsLHkuI3kvJrluKbkuIogdG9rZW4g5LqG44CCDQogICAgICog6L+Z6YeM6KaB5rOo5oSP77yM5aaC5p6c5piv6K6+572uIGNvb2tpZSDnmoTor53vvIwNCiAgICAgKiDpnIDopoHmnI3liqHnq6/mj5DkvpvmjqXlj6PmuIXnkIblvZPliY3ln5/kuIvnmoQgY29va2llIOS/oeaBr++8jA0KICAgICAqIOi/memHjOmHh+eUqOeahOaYryB0b2tlbiDpibTmnYPnmoTmlrnlvI/vvIwNCiAgICAgKiDkuLrkuobmlrnkvr/lkI7nu63lvIDlj5HlsI/nqIvluo/lkowgQXBw77yM5b2S57uT5LqO5LuW5Lus5rKh5pyJ5rWP6KeI5Zmo546v5aKD55qEIGNvb2tpZSDog73lipsNCiAgICAgKi8KCgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG9SZWZzKHN0YXRlKSksIHt9LCB7CiAgICAgIGhhbmRsZU9rOiBoYW5kbGVPaywKICAgICAgbG9nb3V0OiBsb2dvdXQKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\lenovo\\Desktop\\cost\\daily-cost\\src\\views\\Account.vue"],"names":[],"mappings":";;;;;AA+BA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,OAAO,MAAP,MAAmB,0BAAnB;AACA,OAAO,KAAP,MAAkB,gBAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,MAAK,EAAL;AADU,GAFC;AAKb,EAAA,KALa,mBAKL;AACN,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,OAAO,EAAE,KADY;AAErB,MAAA,OAAO,EAAE,EAFY;AAGrB,MAAA,OAAO,EAAE,EAHY;AAIrB,MAAA,QAAQ,EAAE;AAJW,KAAD,CAAtB,CAFM,CASN;;AACA,QAAM,QAAO;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBACX,KAAK,CAAC,OAAN,IAAiB,KAAK,CAAC,QADZ;AAAA;AAAA;AAAA;;AAEb,uBAAM,IAAN,CAAW,QAAX;;AAFa;;AAAA;AAKf;AACC;AACA;AACA;AACA;AACA;AAVc,8BAWE,KAAK,CAAC,IAAN,CAAW,mBAAX,EAAgC;AAC/C,kBAAA,QAAQ,EAAE,KAAK,CAAC,OAD+B;AAE/C,kBAAA,QAAQ,EAAE,KAAK,CAAC,OAF+B;AAG/C,kBAAA,SAAS,EAAE,KAAK,CAAC;AAH8B,iBAAhC,CAXF,EAWP,IAXO,eAWP,IAXO;;AAiBf,uBAAM,OAAN,CAAc,MAAd;;AAjBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb,CAVM,CA8BN;;;AACA,QAAM,MAAK,GAAI,SAAT,MAAS,GAAM;AACnB,MAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;AACA,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAI,EAAE;AAAR,OAAZ;AACF,KAHA;AAIA;AACC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACD,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,QAAQ,EAAR,QAFF;AAGE,MAAA,MAAK,EAAL;AAHF;AAKF;AAtDa,CAAf","sourcesContent":["<template>\r\n  <div class=\"account\">\r\n    <Header title=\"账户安全\" />\r\n    <van-cell title=\"密码修改\" @click=\"visible = true\" is-link />\r\n    <van-button class=\"logout\" type=\"primary\" size=\"large\" @click=\"logout\">退出登录</van-button>\r\n    <van-dialog class=\"modal-pass\" v-model:show=\"visible\" @confirm=\"handleOk\" title=\"修改密码\" show-cancel-button>\r\n      <van-cell-group>\r\n        <van-field\r\n          v-model=\"oldPass\"\r\n          label=\"原密码\"\r\n          clearable\r\n          placeholder=\"请输入原密码\"\r\n        />\r\n        <van-field\r\n          v-model=\"newPass\"\r\n          label=\"新密码\"\r\n          clearable\r\n          placeholder=\"请输入新密码\"\r\n        />\r\n        <van-field\r\n          v-model=\"newPass2\"\r\n          label=\"确认密码\"\r\n          clearable\r\n          placeholder=\"再次输入确认\"\r\n        />\r\n      </van-cell-group>\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { Toast } from 'vant'\r\nimport Header from '../components/Header.vue'\r\nimport axios from '../utils/axios'\r\n\r\nexport default {\r\n  name: 'Account',\r\n  components: {\r\n    Header\r\n  },\r\n  setup() {\r\n    const router = useRouter()\r\n    const state = reactive({\r\n      visible: false,\r\n      oldPass: '',\r\n      newPass: '',\r\n      newPass2: ''\r\n    })\r\n\r\n    // 修改密码\r\n    const handleOk = async () => {\r\n      if (state.newPass != state.newPass2) {\r\n        Toast.fail('新密码不一致')\r\n        return\r\n      }\r\n      /**\r\n       * 修改密码接口 /user/modify_pass 接收三个参数：\r\n       * old_pass：老密码。\r\n       * new_pass：新密码。\r\n       * new_pass2：新密码再次确认。\r\n       */\r\n      const { data } = axios.post('/user/modify_pass', {\r\n        old_pass: state.oldPass,\r\n        new_pass: state.newPass,\r\n        new_pass2: state.newPass2\r\n      })\r\n\r\n      Toast.success('修改成功')\r\n    }\r\n\r\n    // 退出登录\r\n    const logout = () => {\r\n      localStorage.removeItem('token')\r\n      router.push({ path: '/login' })\r\n    }\r\n    /**\r\n     * 退出登录操作，\r\n     * 直接通过 localStorage.removeItem('token') 把存在本地的 token 清空便可，\r\n     * 下一次请求就不会带上 token 了。\r\n     * 这里要注意，如果是设置 cookie 的话，\r\n     * 需要服务端提供接口清理当前域下的 cookie 信息，\r\n     * 这里采用的是 token 鉴权的方式，\r\n     * 为了方便后续开发小程序和 App，归结于他们没有浏览器环境的 cookie 能力\r\n     */\r\n    return {\r\n      ...toRefs(state),\r\n      handleOk,\r\n      logout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  @import url('../config/custom.less');\r\n  .account {\r\n    min-height: 100%;\r\n    background-color: #f5f5f5;\r\n    \r\n    .logout {\r\n      display: block;\r\n      margin: 0 auto;\r\n      width: 90%;\r\n      margin-top: 20px;\r\n      background-color: @primary;\r\n      border-color: @primary;\r\n    }\r\n    .modal-pass {\r\n      .van-dialog__header {\r\n        padding: 10px 0;\r\n      }\r\n      .van-dialog__content {\r\n        .van-cell-group {\r\n          padding: 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"],"sourceRoot":""}]}