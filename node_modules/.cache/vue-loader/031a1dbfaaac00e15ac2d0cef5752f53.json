{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\src\\views\\Login.vue?vue&type=style&index=0&id=26084dc2&lang=less&scoped=true","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\src\\views\\Login.vue","mtime":1645064398970},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIEBpbXBvcnQgdXJsKCcuLi9jb25maWcvY3VzdG9tLmxlc3MnKTsNCiAgLmF1dGggew0KICAgIGhlaWdodDogY2FsYyh+IigxMDAlIC0gNDZweCkiKTsNCiAgICBwYWRkaW5nOiAzMHB4IDIwcHggMCAyMHB4Ow0KICAgIGJhY2tncm91bmQ6QHByaW1hcnktYmc7DQogICAgLmxvZ28gew0KICAgICAgd2lkdGg6IDE1MHB4Ow0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICBtYXJnaW46IDAgYXV0bzsNCiAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7DQogICAgfQ0KICAgIC5mb3JtLXdyYXAgew0KICAgICAgLmZvcm0gew0KICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAudmFuLWNlbGw6Zmlyc3QtY2hpbGQgew0KICAgICAgICAgIHBhZGRpbmctdG9wOiAyMHB4Ow0KICAgICAgICB9DQogICAgICAgIC52YW4tY2VsbDpsYXN0LWNoaWxkIHsNCiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMjBweDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICAuY2hhbmdlLWJ0biB7DQogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgIGNvbG9yOiBAbGluay1jb2xvcjsNCiAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICB9DQogIH0NCiAgL2RlZXAvIC52YW4tZmllbGRfX2NvbnRyb2w6OnBsYWNlaG9sZGVyIHsNCiAgICBjb2xvcjojODY5MDljOw0KICB9DQogIC9kZWVwLyAudmFuLWZpZWxkX19lcnJvci1tZXNzYWdlew0KICAgIGNvbG9yOiNmNTZjNmM7DQogIH0NCiAgLyoqDQogICAgKiDmoLflvI/liIbmnpANCiAgICAqIEBpbXBvcnQgdXJsKCcuLi9jb25maWcvY3VzdG9tLmxlc3MnKTsgDQogICAgKiDlvJXlhaUgTGVzcyDlj5jph4/mlofku7bvvIxjdXN0b20ubGVzcyDlhoXmnInkuovlhYjlrprkuYnlpb3nmoTmoLflvI/lj5jph4/vvIwNCiAgICAqIOWPr+S7peWcqOWGmeagt+W8j+eahOaXtuWAme+8jOS7pSBjb2xvcjogQHByaW1hcnk7IOi/meagt+eahOW9ouW8j+W8leeUqOWug+OAgg0KICAgICog6ZyA6KaB57uZIC5hdXRoIOS4gOS4qumrmOW6pu+8jOS9huaYr+e7mSAxMDAlIOeahOivne+8jOmhtemdouS8muaSkeW8gOWHuueOsOa7muWKqOadoe+8jA0KICAgICog5L2G5piv6L+Z5Liq6aG16Z2i5Y+I5LiN6Iez5LqO5Lya5Ye6546w5rua5Yqo5p2h77yM6L+Z5bCx5Lya5pi+5b6X5b6I5aWH5oCq44CC5LqO5piv6YCa6L+H6K6h566X77yMDQogICAgKiDlhaznlKjlpLTpg6jnu4Tku7bnmoTpq5jluqbkuLogNDbvvIzmiYDku6XpgJrov4cgY2FsYygpIOaWueazle+8jA0KICAgICog5Yqo5oCB55qE6K6h566X5Ye66aG16Z2i55qE6auY5bqm5pivIDEwMCUgLSA0NnB477yM5omA5Lul5aaC5LiK6L+w5Luj56CB5omA56S644CCDQogICAgKi8NCg=="},{"version":3,"sources":["C:\\Users\\lenovo\\Desktop\\cost\\小菊记账\\src\\views\\Login.vue"],"names":[],"mappings":";EA0JE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACpC,CAAC,CAAC,CAAC,CAAC,EAAE;IACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtB,CAAC,CAAC,CAAC,CAAC,EAAE;MACJ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACrB;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACT,CAAC,CAAC,CAAC,CAAC,EAAE;QACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;UACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACnB;QACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;UACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACtB;MACF;IACF;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjB;EACF;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACtC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACf;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACf;EACA,CAAC,CAAC;IACA,EAAE,CAAC,CAAC,CAAC;IACL,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC9B,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpC,CAAC","file":"C:/Users/lenovo/Desktop/cost/小菊记账/src/views/Login.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <!-- 通过 type 属性来给 title 赋值“登录”或“注册” -->\r\n  <Header :title=\"type == 'login' ? '登录' : '注册'\" />\r\n  <div class=\"auth\">\r\n    <img class=\"logo\" src=\"../assets/flower.png\" alt=\"\">\r\n    <!-- 通过 v-if 结合 type 变量来显示或隐藏登录表单 -->\r\n    <van-form class=\"form-wrap\" @submit=\"onSubmit\" v-if=\"type == 'login'\">\r\n      <div class=\"form\">\r\n        <van-field\r\n          clearable\r\n          v-model=\"username\"\r\n          name=\"username\"\r\n          label=\"账号\"\r\n          placeholder=\"请输入账号\"\r\n          :rules=\"[{ required: true, message: '账号不能为空！' }]\"\r\n        />\r\n        <van-field\r\n          clearable\r\n          v-model=\"password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"密码\"\r\n          placeholder=\"请输入密码\"\r\n          :rules=\"[{ required: true, message: '密码不能为空！' }]\"\r\n        />\r\n      </div>\r\n      <div style=\"margin: 16px 0;\">\r\n        <van-button round block type=\"primary\" native-type=\"submit\">\r\n          登录\r\n        </van-button>\r\n        <!-- 切换方法，在登录页面，点击传 register，通过 changType 进行赋值 -->\r\n        <p @click=\"chanegType('register')\" class=\"change-btn\">没有账号，前往注册</p>\r\n      </div>\r\n    </van-form>\r\n    <!-- 通过 v-if 结合 type 变量来显示或隐藏注册表单 -->\r\n    <van-form class=\"form-wrap\" @submit=\"onSubmit\" v-if=\"type == 'register'\">\r\n      <div class=\"form\">\r\n        <van-field\r\n          clearable\r\n          v-model=\"username\"\r\n          name=\"username\"\r\n          label=\"账号\"\r\n          placeholder=\"请输入账号\"\r\n          :rules=\"[{ required: true, message: '账号不能为空！' }]\"\r\n        />\r\n        <van-field\r\n          clearable\r\n          v-model=\"password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"密码\"\r\n          placeholder=\"请输入密码\"\r\n          :rules=\"[{ required: true, message: '密码不能为空！' }]\"\r\n        />\r\n        <van-field\r\n          center\r\n          clearable\r\n          label=\"验证码\"\r\n          placeholder=\"输入验证码\"\r\n          v-model=\"verify\"\r\n        >\r\n          <template #button>\r\n            <VueImgVerify ref=\"verifyRef\" />\r\n          </template>\r\n        </van-field>\r\n      </div>\r\n      <div style=\"margin: 16px 0;\">\r\n        <van-button round block :loading=\"loading\" type=\"primary\" native-type=\"submit\">\r\n          注册\r\n        </van-button>\r\n        <!-- 切换方法，在登录页面，点击传 login，通过 changType 进行赋值 -->\r\n        <p @click=\"chanegType('login')\" class=\"change-btn\">登录已有账号</p>\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, ref, onMounted } from 'vue'\r\nimport VueImgVerify from '../components/VueImageVerify.vue'\r\nimport Header from '../components/Header.vue'\r\nimport axios from '../utils/axios'\r\nimport { Toast } from 'vant'\r\nimport router from '../router'\r\nexport default {\r\n  name: 'Login',\r\n  components: {\r\n    VueImgVerify,\r\n    Header\r\n  },\r\n  setup() {\r\n    const verifyRef = ref(null)\r\n    const state = reactive({\r\n      username: '贾志恒',\r\n      password: '123456',\r\n      type: 'login', // 登录注册模式切换参数\r\n      verify: '', // 验证码输入框输入的内容\r\n      imgCode: '', // 生成的验证图片内的文字\r\n      loading: false\r\n    })\r\n    /**\r\n      * 表单提交方法，分别调用登录和注册 API 地址。\r\n      * try...catch 写法可以捕获到 /user/register 接口调用异常的情况，\r\n      * 如果没成功，可以在 catch 中捕获错误，\r\n      * 逻辑是将按钮 loading 变量变成 false。\r\n      */\r\n    // 提交登录 or 注册表单\r\n    const onSubmit = async (values) => {\r\n      try {\r\n        if (state.type == 'login') {\r\n          const { data } = await axios.post('/user/login', {\r\n            username: state.username,\r\n            password: state.password\r\n          })\r\n          localStorage.setItem('token', data.token)\r\n          window.location.href = '/'\r\n        } else {\r\n          state.imgCode = verifyRef.value.imgCode || ''\r\n          if (verifyRef.value.imgCode.toLowerCase() != state.verify.toLowerCase()) {\r\n            console.log('verifyRef.value.imgCode', verifyRef.value.imgCode)\r\n            Toast.fail('验证码错误')\r\n            return\r\n          }\r\n          state.loading = true\r\n          const { data } = await axios.post('/user/register', {\r\n            username: state.username,\r\n            password: state.password\r\n          })\r\n          Toast.success('注册成功')\r\n          state.type = 'login'\r\n          state.loading = false\r\n        }\r\n      } catch (error) {\r\n        console.log(111)\r\n        state.loading = false\r\n      }\r\n    }\r\n    // 赋值，赋值完成之后模板能拿到响应式结果，隐藏登录表单，显示注册表单。\r\n    // 切换登录和注册两种模式\r\n    const chanegType = (type) => {\r\n      state.type = type\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      onSubmit,\r\n      chanegType,\r\n      verifyRef\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n  @import url('../config/custom.less');\r\n  .auth {\r\n    height: calc(~\"(100% - 46px)\");\r\n    padding: 30px 20px 0 20px;\r\n    background:@primary-bg;\r\n    .logo {\r\n      width: 150px;\r\n      display: block;\r\n      margin: 0 auto;\r\n      margin-bottom: 30px;\r\n    }\r\n    .form-wrap {\r\n      .form {\r\n        border-radius: 10px;\r\n        overflow: hidden;\r\n        .van-cell:first-child {\r\n          padding-top: 20px;\r\n        }\r\n        .van-cell:last-child {\r\n          padding-bottom: 20px;\r\n        }\r\n      }\r\n    }\r\n    .change-btn {\r\n      text-align: center;\r\n      margin: 10px 0;\r\n      color: @link-color;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  /deep/ .van-field__control::placeholder {\r\n    color:#86909c;\r\n  }\r\n  /deep/ .van-field__error-message{\r\n    color:#f56c6c;\r\n  }\r\n  /**\r\n    * 样式分析\r\n    * @import url('../config/custom.less'); \r\n    * 引入 Less 变量文件，custom.less 内有事先定义好的样式变量，\r\n    * 可以在写样式的时候，以 color: @primary; 这样的形式引用它。\r\n    * 需要给 .auth 一个高度，但是给 100% 的话，页面会撑开出现滚动条，\r\n    * 但是这个页面又不至于会出现滚动条，这就会显得很奇怪。于是通过计算，\r\n    * 公用头部组件的高度为 46，所以通过 calc() 方法，\r\n    * 动态的计算出页面的高度是 100% - 46px，所以如上述代码所示。\r\n    */\r\n</style>"]}]}